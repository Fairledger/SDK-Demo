<!DOCTYPE html>
<html>
<head>
	<title>FairLedger Supply Chain</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script>

			function registerUser() {
				$.ajax({
				    beforeSend: function(xhrObj){
				        xhrObj.setRequestHeader("Content-Type","application/json");
				        xhrObj.setRequestHeader("Accept","application/json");
				    },

						type: "GET",
				    url: 'http://localhost:5000/enroll',
						data: { user: $('#uname').val() },
				    dataType: "json",
				    complete: function(data, textStatus) {
							alert("Status: " + data.responseText);	
						}
				});
		}

		function createContract() {
				var username = $("#contract-user").val();
			alert("user: " + username);
				$.ajax({
				    beforeSend: function(xhrObj){
				        xhrObj.setRequestHeader("Content-Type","application/json");
				        xhrObj.setRequestHeader("Accept","application/json");
				    },
						type: "GET",
				    url: 'http://localhost:5000/contract',
						data: { transaction: "create-contract", 
										user: $('#contract-user').val(), 
										product: $('#product').val(), 
										quantity: $('#quantity').val(),
										amount: $('#amount').val(),
										maxtempC: $('#maxtempC').val()
									},
				    dataType: "json",
				    complete: function(data, textStatus) {
							alert("Status: " + data.responseText);	
						}
				});
		}

		function createLoc() {
				var locuser = $("#loc_originator").val();
				alert("user: " + locuser);
				$.ajax({
				    beforeSend: function(xhrObj){
				        xhrObj.setRequestHeader("Content-Type","application/json");
				        xhrObj.setRequestHeader("Accept","application/json");
				    },
						type: "GET",
				    url: 'http://localhost:5000/loc',
						data: { transaction: "create_loc", 
										user: $('#loc_originator').val(), 
										contractID: $('#contractID').val(), 
										value: $('#value').val(),
										importer: $('#importer').val(),
										exporter: $('#exporter').val(),
										shipper: $('#shipper').val(),
										customs: $('#customs').val(),
										port_loading: $('#port_loading').val(),
										port_entry: $('#port_entry').val()
									},
				    dataType: "json",
				    complete: function(data, textStatus) {
							alert("Status: " + data.responseText);	
						}
				});
		}
	</script>
	</script>
</head>
<body>

	<!-- This makes a direct http request without using ajax-->
	<!--form id='registerform' action='http://localhost:5000/enroll' method='GET'-->
	<!-- This is the http request that is sent -->
	<!-- http://localhost:5000/enroll?user=kkp&register=Register-->
	<form id='registerform' onsubmit="registerUser(); return false;">
		<fieldset>
		<legend>Register New User</legend>
		<p>
		User Name: <input type="text" 
											id='uname'
											name="user"
											placeholder='test user1'
											pattern='[A-Z]{20}[0-9]{10}' />
		</p>
		<p>
			<input type='submit' id='register' name='register' value='Register' />
		</p>
		</fieldset>
	</form>

	<form id='contractform' onsubmit="createContract(); return false;">
		<fieldset>
			<legend>Contract</legend>
			<p>
				<label>User Name</label>
				<input type = "text"
             id = "contract-user"
						 pattern="[A-Z]{20}[0-9]{20}", 
             placeholder = "test user1" />
				<span style="display:inline-block; width: 5em;"></span>
				<label>Product</label>
				<input type = "text"
						 id = "product"
						 pattern="[A-Z]{20}[0-9]{20}", 
						 placeholder = "cocoa beans" />

			<span style="display:inline-block; width: 5em;"></span>
      <label>Quantity </label>
      <input type = "text"
              id = "quantity"
              placeholder = "1000" /> lbs

    </p>
    <p>

      <label>Amount $</label>
      <input type = "text"
              id = "amount"
              placeholder = "100" />

			<span style="display:inline-block; width: 5em;"></span>
      
			<label>Max Shipping Temperature </label>
      <input type = "text"
              id = "maxtempC"
              placeholder = "15.30" /> Celcius
    </p>
		<p>
			<input type='submit' id='contract' name='contract' value='Create' />
		</p>
  </fieldset>
	</form>

	<!-- Create Letter of Credit -->
	<form id='locform' onsubmit="createLoc(); return false;">
		<fieldset>
			<legend>Letter Of Credit</legend>
			<p>
				<label>Originator User Name</label>
				<input type = "text"
             id = "loc_originator"
             placeholder = "test user1" />
			
				<span style="display:inline-block; width: 5em;"></span>
		
				<label>Contract ID</label>
				<input type = "text"
             id = "contractID"
             placeholder = "########" />
			
				<span style="display:inline-block; width: 5em;"></span>
			
				<label>Value $</label>
				<input type = "text"
             id = "value"
             placeholder = "10000" />
			</p>
			<p>
				<label>Importer</label>
				<input type = "text"
             id = "importer"
             placeholder = "importer name" />
		
				<span style="display:inline-block; width: 5em;"></span>
			
				<label>Exporter</label>
				<input type = "text"
             id = "exporter"
             placeholder = "exporter name" />
			</p>
			<p>
				<label>Shipping Company</label>
				<input type = "text"
             id = "shipper"
             placeholder = "shipper name" />
			
				<span style="display:inline-block; width: 5em;"></span>
		
				<label>Customs Authority</label>
				<input type = "text"
             id = "customs"
             placeholder = "US Customs" />
			</p>
			<p>
				<label>Port of Loading</label>
				<input type = "text"
             id = "port_loading"
             placeholder = "port of loading" />
			
				<span style="display:inline-block; width: 5em;"></span>
			
				<label>Port of Entry</label>
				<input type = "text"
             id = "port_entry"
             placeholder = "port of entry" />
			</p>
		<p>
			<input type='submit' id='createloc' name='loc' value='Create' />
		</p>
  </fieldset>
	</form>

<div id="response">
    <pre></pre>
</div>

</body>
</html>
