<!DOCTYPE html>
<html>
<head>
	<title>FairLedger Supply Chain</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script>

			//$("#registerUser").click(function() {
			function registerUser() {
				alert("HERER");
			// Add a given number of units to the account value
				$.ajax({
				    beforeSend: function(xhrObj){
				        xhrObj.setRequestHeader("Content-Type","application/json");
				        xhrObj.setRequestHeader("Accept","application/json");
				    },

						type: "GET",
				    url: 'http://localhost:5000/enroll',
						data: { user: $('#uname').val() },
				    dataType: "json",
				    complete: function(data, textStatus) {
							alert("Status: " + data.responseText);	
						}
				});
		//});
		}

		//$("#createContract").click(function() {
		function createContract() {
				var username = $("#contract-user").val();
			alert("user: " + username);
				$.ajax({
				    beforeSend: function(xhrObj){
				        xhrObj.setRequestHeader("Content-Type","application/json");
				        xhrObj.setRequestHeader("Accept","application/json");
				    },
						type: "GET",
				    url: 'http://localhost:5000/transactions',
						data: { transaction: "create-contract", 
										user: $('#contract-user').val(), 
										product: $('#product').val(), 
										quantity: $('#quantity').val(),
										amount: $('#amount').val(),
										maxtempC: $('#maxtempC').val()
									},
				    dataType: "json",
				    complete: function(data, textStatus) {
							alert("Status: " + data.responseText);	
						}
				});
	//	});
		}
	</script>
</head>
<body>

	<h1> Register New User</h1>
	<!-- This makes a direct http request without using ajax-->
	<!--form id='registerform' action='http://localhost:5000/enroll' method='GET'-->
	<!-- This is the http request that is sent -->
	<!-- http://localhost:5000/enroll?user=kkp&register=Register-->
	<form id='registerform' onsubmit="registerUser(); return false;">
		<p>
		User Name: <input type="text" 
											id='uname'
											name="user"
											placeholder='farmer'
											pattern='[A-Z]{20}[0-9]{10}' />
		</p>
		<p>
			<input type='submit' id='register' name='register' value='Register' />
		</p>
	</form>

	<form id='contractform' onsubmit="createContract(); return false;">
		<fieldset>
			<legend>Contract</legend>
			<p>
				<label>User</label>
				<input type = "text"
             id = "contract-user"
						 pattern="[A-Z]{20}[0-9]{20}", 
             placeholder = "test username" />
    </p>
    <p>
      <label>Product</label>
      <input type = "text"
						 id = "product"
						 pattern="[A-Z]{20}[0-9]{20}", 
						 placeholder = "cocoa beans" />
    </p>
    <p>
      <label>Quantity (lbs)</label>
      <input type = "text"
              id = "quantity"
              placeholder = "1000" />
    </p>
    <p>
      <label>Amount ($))</label>
      <input type = "text"
              id = "amount"
              placeholder = "100" />
    </p>
    <p>
      <label>Max Shipping Temperature C</label>
      <input type = "text"
              id = "maxtempC"
              placeholder = "15.30" />
    </p>
		<p>
			<input type='submit' id='contract' name='contract' value='Create' />
		</p>
  </fieldset>
	</form>

<div id="response">
    <pre></pre>
</div>

</body>
</html>
